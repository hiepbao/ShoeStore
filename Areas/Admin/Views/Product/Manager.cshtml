@using ShoeStore
@{
    ViewBag.Title = "Quản lý sản phẩm";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    var successMessage = TempData["SuccessMessage"] as string;
    var errorMessage = TempData["ErrorMessage"] as string;
}

@if (!string.IsNullOrEmpty(successMessage))
{
    <div id="notice" class="alert alert-success text-light" style="background: linear-gradient(90deg, #54BF5A 0.7%, #2D9147 71.82%);">@successMessage</div>
}

@using (Html.BeginForm("Manager", "Product", FormMethod.Get))
{
    <div class="container" style="background-color: #F2F2F2; padding: 50px;">

        <div class="d-flex justify-content-between mb-3">
            <h3 class="fw-bold">Product Management</h3>
            @*<form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-success" type="submit">Search</button>
                </form>*@
        </div>
        <div class="d-flex justify-content-between">
            <a href="@Url.Action("ThemSanPham", "Product")" class="btn btn-success mb-3" style="border-radius: 1.5rem;  width: 20%;">+ Add Product</a>

            <div class="search-form">
                <input type="text" name="searchString" value="" placeholder="Search...">
                <button class="border-0 bg-opacity-0" type="submit">
                    Search
                </button>
            </div>
        </div>

        <div class="form-horizontal" style="background-color: white; padding: 30px; border-radius: 1rem">
            <div class="">
                <table class="table table-hover">

                    <tr>
                        <th>
                            <label>No.</label>
                        </th>
                        <th>
                            <label>Name</label>
                        </th>
                        <th>
                            <label>Image</label>
                        </th>

                        <th>
                            <label>Price</label>
                        </th>
                        <th>
                            <label>Category</label>
                        </th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>

                    @foreach (var item in ViewBag.Products)
                    {
                        <tr>
                            <td>
                                @item.ProductId
                            </td>
                            <td>
                                @item.ProductName
                            </td>
                            <td class="" style="width: 10rem">
                                @if (item.ImageData != null)
                                {
                                    <img src="data:image/@item.ImageExtension;base64,@Convert.ToBase64String(item.ImageData)" class="w-100" alt="">
                                }
                                else
                                {
                                    <img src="~/images/shoemodel.jpg" class="w-100" alt="">
                                }
                            </td>

                            <td>
                                @string.Format("{0:N0}", item.ProductPrice) VND
                            </td>
                            <td>
                                @item.CategoryName
                            </td>
                            <td>
                                @Html.ActionLink("Change", "SuaSanPham", new { id = item.ProductId }, new { @class = "btn btn-outline-success mx-auto w-100", @style = "border-radius: 1.5rem;  " })
                            </td>
                            <td>
                                @Html.ActionLink("Add", "QLSanPham", new { id = item.ProductId }, new { @class = "btn btn-outline-success mx-auto w-100", @style = "border-radius: 1.5rem;  " })
                            </td>
                            <td>
                                @Html.ActionLink("Delete", "XoaSanPham", new { id = item.ProductId }, new { @class = "btn btn-outline-success mx-auto w-100", @style = "border-radius: 1.5rem;  " })
                            </td>
                        </tr>
                    }

                </table>
            </div>
        </div>
    </div>
}

@section Scripts{
    <script>
    $(document).ready(function () {

            if ($("#notice").is(':visible')) {
                $("#notice").fadeIn(2000, function () {
                    $("#notice").fadeOut(2000)
                });
            }
        });</script>
}

